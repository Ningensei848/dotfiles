" ----------------------------------------------------------------------------
" 0. 全般設定 --------------------------------------------------------------------
" ----------------------------------------------------------------------------
source $VIMRUNTIME/defaults.vim

" --- 基本設定 -------------------------------------------------------------------
" 行番号を表示
set number

" バックアップファイルを作らない
set nowritebackup

" バックアップファイルを作らない
set nobackup

" 矩形選択で文字が無くても右へ進める
set virtualedit=block

set backspace=indent,eol,start

" 全角文字の表示幅対策
set ambiwidth=double

" ステータスバーを常に表示
set laststatus=2

" シンタックスハイライト
syntax on

" --- インデント & タブ -------------------------------------------------------------
" 改行時にインデントを継承
set autoindent

" Tabをスペースに変換
set expandtab

" Tab幅
set tabstop=4

" 自動インデント幅
set shiftwidth=4

" 高度なインデント
set smartindent

" 行頭のTabをインデントとして扱う
set smarttab

" --- 表示系 --------------------------------------------------------------------
" 空白文字の可視化
set list

set listchars=tab:»-,trail:-,eol:↲,extends:»,precedes:«,nbsp:%

" 対応する括弧を強調
set showmatch

" 括弧強調の表示時間
set matchtime=1

" --- 現代的な便利設定 ---------------------------------------------------------------
" OSのクリップボードと連携する (要+clipboard)
set clipboard=unnamedplus

" マウス操作を有効化
set mouse=a

" 画面分割時に右側に開く
set splitright

" 画面分割時に下側に開く
set splitbelow

" アンドゥ履歴をファイルに保存（Vimを閉じてもUndo可能に）
set undofile

if !isdirectory($HOME . "/.vim/undo")
    call mkdir($HOME . "/.vim/undo", "p")
endif
set undodir=$HOME/.vim/undo

" ----------------------------------------------------------------------------
" 1. 移動 & キーマップ --------------------------------------------------------------
" ----------------------------------------------------------------------------
inoremap <C-j> <Down>
inoremap <C-k> <Up>
inoremap <C-h> <Left>
inoremap <C-l> <Right>

" jj でインサートモードを抜ける (有名な設定)
inoremap jj <Esc>

" ----------------------------------------------------------------------------
" 2. 検索 ----------------------------------------------------------------------
" ----------------------------------------------------------------------------

" 検索結果をハイライト
set hlsearch

" 大文字小文字を区別しない
set ignorecase

" インクリメンタルサーチ
set incsearch

" 大文字が含まれる場合のみ区別する
set smartcase

" Esc 2回連打で検索ハイライトを解除
nnoremap <Esc><Esc> :nohlsearch<CR>

" ----------------------------------------------------------------------------
" 99. プラグイン読み込み --------------------------------------------------------------
" ----------------------------------------------------------------------------
" ファイルタイププラグインを有効化
filetype plugin indent on

packloadall
